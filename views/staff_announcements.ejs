<% title = title || 'ãŠçŸ¥ã‚‰ã›ç®¡ç†' %>

<style>
  /* ã“ã®ãƒšãƒ¼ã‚¸ã®ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å†…ã ã‘ç™½æ–‡å­—ã«ã™ã‚‹ */
  .container.py-4.text-light h2,
  .container.py-4.text-light h4,
  .container.py-4.text-light h5,
  .container.py-4.text-light p,
  .container.py-4.text-light label,
  .container.py-4.text-light small,
  .container.py-4.text-light div,
  .container.py-4.text-light span {
    color: #fff !important;
  }

  /* ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚‚å°‘ã—æ˜ã‚‹ã‚ã®ã‚°ãƒ¬ãƒ¼ã« */
  .container.py-4.text-light input::placeholder,
  .container.py-4.text-light textarea::placeholder {
    color: #cccccc !important;
  }
</style>

<div class="container py-4 text-light">
  <h2 class="mb-4">ğŸ“¢ ãŠçŸ¥ã‚‰ã›ç®¡ç†</h2>

  <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
  <% if (success) { %>
    <div class="alert alert-success">âœ… æ›´æ–°ã—ã¾ã—ãŸã€‚</div>
  <% } %>
  <% if (error) { %>
    <div class="alert alert-danger">âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚</div>
  <% } %>

  <!-- è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ  -->
  <div class="card bg-dark border border-info mb-4">
    <div class="card-body">
      <h4 class="card-title mb-3">æ–°ã—ã„ãŠçŸ¥ã‚‰ã›ã‚’è¿½åŠ </h4>
      <form action="/staff/announcements" method="POST">
        <div class="mb-3">
          <label class="form-label">ã‚¿ã‚¤ãƒˆãƒ«</label>
          <input
            type="text"
            name="title"
            class="form-control bg-dark text-light border border-info"
            placeholder="ä¾‹ï¼‰ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®ãŠçŸ¥ã‚‰ã›"
            required
          >
        </div>
        <div class="mb-3">
          <label class="form-label">æœ¬æ–‡</label>
          <textarea
            name="body"
            rows="4"
            class="form-control bg-dark text-light border border-info"
            placeholder="ä¾‹ï¼‰3/10 02:00ã€œ05:00ã®é–“ã€ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®ãŸã‚ä¸€æ™‚çš„ã«ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã›ã‚“ã€‚"
            required
          ></textarea>
        </div>
        <button type="submit" class="btn btn-info fw-bold">è¿½åŠ ã™ã‚‹</button>
      </form>
    </div>
  </div>

  <!-- æ—¢å­˜ãŠçŸ¥ã‚‰ã›ä¸€è¦§ -->
  <div class="card bg-dark border border-info">
    <div class="card-body">
      <h4 class="card-title mb-3">ç™»éŒ²æ¸ˆã¿ãŠçŸ¥ã‚‰ã›ä¸€è¦§</h4>

      <% if (!announcements || announcements.length === 0) { %>
        <p class="text-light mb-0">ã¾ã ãŠçŸ¥ã‚‰ã›ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
      <% } else { %>
        <div class="d-flex flex-column gap-3">
          <% announcements.forEach(a => { %>
            <div class="border border-secondary rounded p-3">
              <div class="d-flex justify-content-between align-items-center mb-1">
                <div>
                  <h5 class="mb-1"><%= a.title %></h5>
                  <small class="text-muted">
                    <%= new Date(a.created_at).toLocaleString("ja-JP", { timeZone: "Asia/Tokyo" }) %>
                  </small>
                </div>
                <form action="/staff/announcements/<%= a.id %>/delete" method="POST" onsubmit="return confirm('ã“ã®ãŠçŸ¥ã‚‰ã›ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
                  <button type="submit" class="btn btn-sm btn-outline-danger">å‰Šé™¤</button>
                </form>
              </div>
              <p class="mb-0" style="white-space: pre-wrap;"><%= a.body %></p>
            </div>
          <% }) %>
        </div>
      <% } %>
    </div>
  </div>
</div>
